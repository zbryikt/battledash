!function(){var e,n,r,t,o;getfa("sample").then(function(e){var n;return e.writeFileSync("blank","hello index.html!"),(n=new Editor({node:{edit:"[ld=editor]",view:"[ld=viewer]"},editlet:{},renderer:function(e){var r,t,o,d,i;if(r=e.fs){t={html:r.readFileSync(n.fs.openedFile).toString()};for(o in t)d=t[o],(i=transpiler.detect(d)).mod&&i.mod.transform&&(t[o]=i.mod.transform(d));return t}}})).setFiles(e),n.open("blank"),new ldView({root:"[ld-scope=editor]",action:{click:{file:function(e){var n,r;return n=e.node,r=n.getAttribute("data-name"),t(r)}}}})}),e=new sharedbWrapper({url:{scheme:window.location.protocol.replace(":",""),domain:window.location.host}}),n=function(e,n){var t,o;if(!n)return t=ed.ed.cm.getValue(),o=(r.doc.data||{})[r.name],t!==o?((r.old||(r.old={}))[r.name]=(r.cur||(r.cur={}))[r.name]=o,cm.setValue(o||""),render()):void 0},r={},t=function(t){return e.get({id:t,watch:n}).then(function(e){return r.doc=e,r.old=JSON.parse(JSON.stringify(e.data)),r.cur=JSON.parse(JSON.stringify(e.data)),fs.writeFileSync(t,r.cur),ed.open(fn),ed.render()}).catch(function(e){return console.log("document open failed: ",e)})},o=function(){var n;if(n=ed.ed.cm.getValue(),(r.cur||(r.cur={}))[r.name]!==n)return(r.cur||(r.cur={}))[r.name]=n,r.doc.submitOp(e.json.diff(r.old,r.cur)),(r.old||(r.old={}))[r.name]=n},ed.ed.cm.on("change",function(){return o()})}();